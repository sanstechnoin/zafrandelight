<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kitchen Display System | Zaffran</title>
    <link rel="icon" type="image/png" href="favlogo.png">
    <link rel="stylesheet" href="style.css?v=45">
    <style>
        /* --- ENTERPRISE THEME (SAP STYLE) --- */
        :root {
            --ent-bg: #121212;
            --ent-panel: #1e1e2d; 
            --ent-header: #2b2b40;
            --ent-border: #3a3a4e;
            --gold: #D4AF37;
            --pickup-blue: #3498db;
            --delivery-orange: #e67e22;
            --text-main: #e0e0e0;
            --text-muted: #a0a0a0;
            --content-width: 1800px; /* Wider for Kitchen Board */
        }

        body.kitchen-body { 
            background-color: var(--ent-bg); color: var(--text-main); 
            font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif; 
            margin: 0; display: flex; flex-direction: column; height: 100vh; overflow: hidden; 
        }

        /* HEADER */
        header { 
            background: var(--ent-panel); border-bottom: 1px solid var(--gold); 
            height: 60px; flex-shrink: 0; display: flex; align-items: center; padding: 0 20px;
        }
        .header-inner { display: flex; justify-content: space-between; align-items: center; width: 100%; max-width: var(--content-width); margin: 0 auto; }
        .brand { display: flex; align-items: center; gap: 10px; font-weight: bold; color: var(--gold); font-size: 1.2rem; text-transform: uppercase; }
        .brand img { height: 35px; }
        .system-status { 
            font-size: 0.85rem; background: #111; padding: 5px 12px; border-radius: 4px; 
            border: 1px solid #333; color: var(--text-muted); display: flex; align-items: center; gap: 8px;
        }
        .status-dot { width: 8px; height: 8px; border-radius: 50%; background: #555; display: inline-block; }
        .status-dot.online { background: #00c853; box-shadow: 0 0 5px #00c853; }

        /* MAIN KANBAN BOARD */
        .dashboard-container { 
            flex: 1; overflow-y: hidden; /* Columns scroll independently */
            display: flex; flex-direction: column; width: 100%; 
            padding-bottom: 40px; /* Space for footer */
        }
        .kanban-board {
            display: flex; gap: 20px; height: 100%; padding: 20px;
            max-width: var(--content-width); margin: 0 auto; width: 100%; box-sizing: border-box;
        }
        
        /* COLUMNS */
        .kanban-col {
            flex: 1; display: flex; flex-direction: column;
            background: #181820; border: 1px solid var(--ent-border); border-radius: 8px;
            overflow: hidden;
        }
        .col-header {
            padding: 15px; text-align: center; font-size: 1.2rem; font-weight: bold;
            text-transform: uppercase; letter-spacing: 1px; border-bottom: 2px solid #333;
            background: var(--ent-panel); color: white;
        }
        .col-body {
            flex: 1; overflow-y: auto; padding: 15px; display: flex; flex-direction: column; gap: 15px;
        }

        /* COLUMN SPECIFIC COLORS */
        #col-dinein .col-header { border-bottom-color: var(--gold); color: var(--gold); }
        #col-pickup .col-header { border-bottom-color: var(--pickup-blue); color: var(--pickup-blue); }
        #col-delivery .col-header { border-bottom-color: var(--delivery-orange); color: var(--delivery-orange); }

        /* ORDER CARDS */
        .order-card {
            background: var(--ent-panel); border: 1px solid var(--ent-border); border-radius: 6px;
            padding: 0; box-shadow: 0 4px 6px rgba(0,0,0,0.3);
            display: flex; flex-direction: column;
            animation: fadeIn 0.3s ease;
        }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .card-header {
            padding: 10px 15px; display: flex; justify-content: space-between; align-items: center;
            border-bottom: 1px solid #333; background: rgba(0,0,0,0.2);
        }
        .card-title { font-size: 1.3rem; font-weight: bold; color: white; margin: 0; }
        .card-time { font-size: 0.9rem; color: #aaa; font-family: monospace; }
        
        .card-body { padding: 15px; }
        .kitchen-item {
            font-size: 1.1rem; margin-bottom: 8px; padding-bottom: 5px;
            border-bottom: 1px dashed #333; display: flex; justify-content: space-between;
        }
        .kitchen-item strong { color: #fff; margin-left: 5px; }
        .item-qty { color: var(--gold); font-weight: bold; margin-right: 10px; }

        .card-footer { padding: 10px 15px; background: rgba(0,0,0,0.2); text-align: center; }
        
        /* BUTTONS */
        .btn-action {
            width: 100%; padding: 12px; font-size: 1.1rem; font-weight: bold; border: none; border-radius: 4px;
            cursor: pointer; text-transform: uppercase; transition: background 0.2s;
        }
        .btn-ready { background: #2a2a2a; color: #fff; border: 1px solid #555; }
        .btn-ready:hover { background: #006400; border-color: #006400; }
        
        .btn-done { background: #006400; color: white; opacity: 0.7; }
        .btn-done:hover { opacity: 1; }

        .card-note { 
            background: #3a1c1c; color: #ffaaaa; padding: 8px; font-size: 0.9rem; 
            border-radius: 4px; margin-top: 10px; font-style: italic; border: 1px solid #5c2b2b;
        }

        /* MASTER CLEAR BUTTON */
        #master-clear-btn {
            background-color: #8B0000; color: white; font-weight: bold; font-size: 0.9rem;
            padding: 8px 15px; border: 1px solid #ff4444; border-radius: 4px; cursor: pointer;
        }
        #master-clear-btn:hover { background-color: #ff0000; }

        /* FOOTER */
        .site-credit-footer {
            position: fixed; bottom: 0; left: 0; width: 100%;
            background: var(--ent-header); border-top: 1px solid var(--gold);
            padding: 8px 0; font-size: 0.8rem; color: #888;
            display: flex; justify-content: center; z-index: 100;
        }
        .footer-inner { display: flex; justify-content: space-between; width: 100%; max-width: var(--content-width); padding: 0 20px; }

        /* POPUPS (Retained Functionality) */
        #new-order-popup-overlay .kitchen-popup-box {
            border: 4px solid var(--gold); background: #111; width: 80%; max-width: 700px;
        }
        #accept-order-btn {
            background: var(--gold); color: black; font-size: 1.5rem; padding: 20px; width: 100%; border: none; font-weight: bold; cursor: pointer;
        }
        
        /* WAITER CALL */
        #waiter-call-overlay .kitchen-popup-box { border-color: #ff4444; background: #200; }
        #waiter-call-table { font-size: 3rem; color: white; margin: 20px 0; }
        .hidden { display: none !important; }

    </style>
</head>
<body class="kitchen-body">

    <header>
        <div class="header-inner">
            <div class="brand">
                <img src="logo.png" alt="Logo">
                <span>Kitchen Display</span>
            </div>
            <div style="display:flex; gap:20px; align-items:center;">
                <button id="master-clear-btn">‚ö†Ô∏è CLEAR ALL</button>
                <div class="system-status">
                    <span class="status-dot" id="status-dot"></span>
                    <span id="connection-icon">Connecting...</span>
                </div>
            </div>
        </div>
    </header>

    <div class="dashboard-container">
        <div class="kanban-board">
            
            <div class="kanban-col" id="col-dinein">
                <div class="col-header">üçΩÔ∏è Dine-In</div>
                <div class="col-body" id="list-dinein"></div>
            </div>

            <div class="kanban-col" id="col-pickup">
                <div class="col-header">üõçÔ∏è Pickup</div>
                <div class="col-body" id="list-pickup"></div>
            </div>

            <div class="kanban-col" id="col-delivery">
                <div class="col-header">üöö Delivery</div>
                <div class="col-body" id="list-delivery"></div>
            </div>

        </div>
    </div>

    <footer class="site-credit-footer" id="footer-bar">
        <div class="footer-inner">
            <span class="footer-copyright">&copy; 2025 Zaffran Delight</span>
            <span class="footer-developer">System v2.0 - KDS</span>
        </div>
    </footer>

    <div id="new-order-popup-overlay" class="kitchen-popup-overlay hidden">
        <div class="kitchen-popup-box">
            <h3 style="color:var(--gold); font-size:2rem; margin-top:0; text-align:center;">üîî NEW ORDER üîî</h3>
            <div id="popup-order-details" style="text-align:center; font-size:1.5rem; margin:20px 0; color:white;"></div>
            <button id="accept-order-btn">ACKNOWLEDGE</button>
        </div>
    </div>

    <div id="waiter-call-overlay" class="kitchen-popup-overlay hidden">
        <div class="kitchen-popup-box">
            <h3 style="color:#ff4444;">‚ö†Ô∏è SERVICE REQUEST</h3>
            <div id="waiter-call-table">TABLE ?</div>
            <button id="dismiss-waiter-btn" style="background:#ff4444; color:white; padding:15px; width:100%; border:none; font-size:1.2rem; cursor:pointer;">DISMISS</button>
        </div>
    </div>
    
    <div id="kitchen-login-overlay" class="kitchen-popup-overlay">
        <div class="kitchen-popup-box" style="background:#222; border:1px solid var(--gold);">
            <h3 style="color:var(--gold);">Kitchen Access</h3>
            <input type="password" id="kitchen-password" placeholder="Password" style="padding:10px; width:80%; margin:10px 0; text-align:center;">
            <p id="login-error" style="color: red; display: none;">Invalid Password</p>
            <button id="login-button" style="background:var(--gold); color:black; padding:10px 20px; border:none; font-weight:bold; cursor:pointer;">Login</button>
        </div>
    </div>
    
    <audio id="alertSound" src="notification.mp3"></audio>

    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>
    <script src="kitchen-script.js?v=7"></script> 

</body>
</html>
